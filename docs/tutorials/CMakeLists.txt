SET(TUTORIALSSRC ${CMAKE_CURRENT_SOURCE_DIR})
SET(TUTORIALS ${CMAKE_BINARY_DIR}/docs/tutorials)

FILE(MAKE_DIRECTORY ${TUTORIALS}/html)

FIND_PROGRAM(HTLATEX htlatex)
MARK_AS_ADVANCED(HTLATEX)
ADD_CUSTOM_TARGET(tutorials-html
    export TEXINPUTS=${TUTORIALSSRC}//: && ${HTLATEX} ${TUTORIALSSRC}/tutorials.tex 
    "${TUTORIALSSRC}/styling.cfg,html,2,next,NoFonts"
    WORKING_DIRECTORY ${TUTORIALS}/html
)

FIND_PROGRAM(PDFLATEX pdflatex)
MARK_AS_ADVANCED(PDFLATEX)
FIND_PROGRAM(BIBTEX bibtex)
MARK_AS_ADVANCED(BIBTEX)
FIND_PROGRAM(MAKEINDEX makeindex)
MARK_AS_ADVANCED(MAKEINDEX)

ADD_CUSTOM_TARGET(tutorials-pdf
    ${PDFLATEX} --output-directory ${TUTORIALS} ${TUTORIALSSRC}/tutorials.tex
    COMMAND TEXMFOUTPUT=${TUTORIALS} ${BIBTEX} ${TUTORIALS}/tutorials.aux
    COMMAND TEXMFOUTPUT=${TUTORIALS} ${MAKEINDEX} ${TUTORIALS}/tutorials.idx
    COMMAND ${PDFLATEX} --output-directory ${TUTORIALS}
        ${USERGUIDESRC}/tutorials.tex
    WORKING_DIRECTORY ${TUTORIALSSRC}
)
